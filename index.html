# Create a small website for "ULS AnyDesk Connect" and a step-by-step guide
import os, zipfile, textwrap, json

base = "/mnt/data/uls-anydesk-connect"
os.makedirs(base, exist_ok=True)

anydesk_id = "1411035339"  # Provided by the user
alias = ""  # optional alias if they add later

# Basic index.html with device detection and clear CTA buttons
index_html = f"""<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ULS Remote Support - AnyDesk Connect</title>
  <meta name="description" content="One-click remote support connection for Utility Location Services via AnyDesk.">
  <style>
    html,body {{ margin:0; padding:0; font-family: -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background:#0b0f14; color:#e6edf3; }}
    .wrap {{ max-width: 900px; margin: 0 auto; padding: 32px 20px; }}
    .card {{ background:#121826; border:1px solid #243149; border-radius:16px; padding:24px; box-shadow: 0 8px 24px rgba(0,0,0,0.25); }}
    h1 {{ font-size: 28px; margin:0 0 8px; }}
    p.lead {{ color:#9db2ce; margin-top:0; }}
    .row {{ display:flex; flex-wrap:wrap; gap:16px; }}
    .col {{ flex:1 1 260px; background:#0e1523; border:1px solid #1f2a44; border-radius:12px; padding:16px; }}
    .btn {{ display:inline-block; text-decoration:none; border:1px solid #33507a; padding:12px 16px; border-radius:12px; font-weight:600; }}
    .btn:hover {{ background:#13233d; }}
    .primary {{ background:#1f6feb; border-color:#1f6feb; color:white; }}
    .primary:hover {{ background:#1a5bc4; }}
    code, .mono {{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; }}
    .muted {{ color:#9db2ce; }}
    .footer {{ margin-top:24px; font-size:12px; color:#8899b0; }}
    .badge {{ padding:2px 8px; border-radius:999px; font-size:12px; background:#18243a; border:1px solid #2b416a; }}
    .stack {{ display:flex; gap:10px; flex-wrap:wrap; }}
    .hidden {{ display:none; }}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>ULS Remote Support</h1>
      <p class="lead">This page helps you install AnyDesk and connect securely with our technician in a few clicks.</p>

      <div class="row">
        <div class="col">
          <h3>Step 1 — Download AnyDesk</h3>
          <p class="muted">We detected your device and selected the right download for you. If that looks wrong, pick a different option below.</p>
          <div class="stack">
            <a id="downloadAuto" class="btn primary" href="https://anydesk.com/en/downloads" rel="noopener">Download AnyDesk</a>
            <span id="detected" class="badge">Detecting device…</span>
          </div>
          <details style="margin-top:12px;">
            <summary>Or choose your platform</summary>
            <div class="stack" style="margin-top:8px;">
              <a class="btn" href="https://anydesk.com/en/downloads/windows" rel="noopener">Windows</a>
              <a class="btn" href="https://anydesk.com/en/downloads/mac-os" rel="noopener">macOS</a>
              <a class="btn" href="https://anydesk.com/en/downloads/linux" rel="noopener">Linux</a>
              <a class="btn" href="https://play.google.com/store/apps/details?id=com.anydesk.anydeskandroid" rel="noopener">Android</a>
              <a class="btn" href="https://apps.apple.com/app/anydesk-remote-desktop/id1176131273" rel="noopener">iPhone / iPad</a>
            </div>
          </details>
        </div>

        <div class="col">
          <h3>Step 2 — Connect to our technician</h3>
          <p>Once AnyDesk is installed, click the button below.</p>
          <div class="stack">
            <a id="connect" class="btn primary mono" href="anydesk://{anydesk_id}" rel="nofollow">Connect: anydesk://{anydesk_id}</a>
            <button id="copy" class="btn mono" type="button">Copy ID</button>
          </div>
          <p class="muted" style="margin-top:8px;">If prompted by your browser, choose “Open AnyDesk”.</p>
          <p class="muted">Your connection will only start once we accept your request.</p>
        </div>
      </div>

      <div class="footer">
        <p>Support ID: <span class="mono">{anydesk_id}</span> | Utility Location Services — Remote Support</p>
        <p class="muted">Note: Some browsers block automatic app launching. If clicking the connect button does nothing, open AnyDesk and paste the ID manually.</p>
      </div>
    </div>
  </div>

  <script>
    (function() {{
      const id = "{anydesk_id}";
      const alias = "{alias}";
      const download = document.getElementById('downloadAuto');
      const detected = document.getElementById('detected');
      const connect = document.getElementById('connect');
      const copyBtn = document.getElementById('copy');

      // Device detection for better default download link
      const ua = navigator.userAgent || '';
      let target = 'https://anydesk.com/en/downloads';
      let label = 'Select download';
      if (/Windows NT/i.test(ua)) {{ target = 'https://anydesk.com/en/downloads/windows'; label = 'Windows detected'; }}
      else if (/Macintosh|Mac OS X/i.test(ua)) {{ target = 'https://anydesk.com/en/downloads/mac-os'; label = 'macOS detected'; }}
      else if (/Linux/i.test(ua)) {{ target = 'https://anydesk.com/en/downloads/linux'; label = 'Linux detected'; }}
      else if (/Android/i.test(ua)) {{ target = 'https://play.google.com/store/apps/details?id=com.anydesk.anydeskandroid'; label = 'Android detected'; }}
      else if (/iPhone|iPad|iPod/i.test(ua)) {{ target = 'https://apps.apple.com/app/anydesk-remote-desktop/id1176131273'; label = 'iOS detected'; }}

      download.href = target;
      detected.textContent = label;

      // Try to open AnyDesk automatically after a small delay
      function tryLaunch() {{
        window.location.href = 'anydesk://' + (alias || id);
      }}
      setTimeout(tryLaunch, 1200);

      // Copy to clipboard
      copyBtn.addEventListener('click', function() {{
        navigator.clipboard.writeText(id).then(function() {{
          copyBtn.textContent = 'Copied';
          setTimeout(function() {{ copyBtn.textContent = 'Copy ID'; }}, 1500);
        }});
      }});
    }})();
  </script>
</body>
</html>
"""

# README with step-by-step GitHub Pages instructions
readme = f"""# ULS AnyDesk Connect

A tiny landing page to help customers download AnyDesk and connect to your support session in one click.

## Your Support ID
- AnyDesk ID: **{anydesk_id}**
- Connect link: `anydesk://{anydesk_id}`

---

## Host on GitHub Pages (free)

1. **Create a GitHub account** (or sign in).
2. **Create a new public repository** named `uls-anydesk-connect`.
3. Upload the `index.html` file from this folder to the root of the repo.
4. Go to **Settings → Pages**.
   - Under **Build and deployment**, set **Source** to **Deploy from a branch**.
   - Select **Branch**: `main` and **/root`** (or `docs` if you prefer).
   - Save.
5. Wait 1–2 minutes. Your site will be live at:
   - `https://<your-username>.github.io/uls-anydesk-connect`
6. Share a shorter link if you like (for example via bit.ly).

### Optional: Customise Branding
- Replace the page title, headings, and colours in `index.html` to match ULS or The Cloud Geeks.
- If you wish to add a logo, upload `logo.png` to the repo and add this near the top of the HTML:
  ```html
  <img src="logo.png" alt="ULS" style="height:48px; margin-bottom:12px;">
